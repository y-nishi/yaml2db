# テーブル設計ツール（仮）
テーブル設計ツールは以下の特徴があります。

- YAMLでテーブル定義を記述して、DDL文を生成します
- 日本語名称と物理名を対応させた辞書を作成しておけば、日本語のカラムを指定するだけで、自動的に物理名のカラムに変換します。
- カラムの定義にドメインを指定することで、属性の指定を楽にします。
- 日本語名や説明をOracleのComment句に埋めることができます
- Oracleに対応しています

テーブル名やカラム名に日本語名を使いたくない場合などに有用だと思います。

## テーブル定義の記述

### table:
テーブルの情報を記述します。
#### table:name:
テーブルの論理名を記述します。この項目は変換対象ではありません。comment句に埋め込まれます。
#### table:pname:
テーブルの物理名を記述します。存在しなければ、ファイル名の拡張子を除いた部分を物理名とします。
#### table:comment:
テーブルの説明を記述します。テーブル名称の後にタブで区切られてcommentに入ります。
#### table:checks:
テーブルレベルのCheck制約を記述します。配列で記述し、複数の制約が記述できます。カラム名は<>で囲まれた文字列に論理名を記述してください。
#### table:refers:
参照整合性制約を設定するテーブルを配列で記述します。論理名を記述することも可能です。

### table:columns:
カラム定義を行います。配列で記述します。
#### table:columns:name:
カラムの論理名を記述します。pnameがなければ、.（ドット）区切りで辞書に変換されて物理名を作ります。もし、辞書に存在しない場合は変換されず記述通りに物理名を作成します。ドットは定義生成時には除かれます。
#### table:columns:pname:
カラムの物理名を記述します。存在しなければ、カラムの日本語名から物理名を作ります。
#### table:columns:domain:
ドメイン名を記述し、ドメインに記述されている定義情報を使用します。もし存在せず、さらにtype:も存在しない場合は、name:からドメインを検索します。
domain:とtype:が存在する場合は、domain:の値をtype:で上書きした値とします。よって、ドメインと違う部分をtype:で記述することが可能です。
#### table:columns:pkey:
値に数値を指定します。該当カラムが主キーの要素の場合、その順序です。
#### table:columns:refers:
該当のカラムに参照整合性制約を設定します。table:refers:に指定をすることが必要です。複数の場合は配列にしてください。
##### table:columns:refer:table:
table:refersの順序を指定します。0から始まります。省略はできません。
##### table:columns:refer:order:
参照先のカラムが複数の場合に、その順序を指定します。存在しない場合は0が指定されたとします。
##### table:columns:refer:column:
参照先のカラム名を物理名で指定します。もし参照元カラムの物理名が同じであれば省略できます。
#### table:columns:indexN:
ハッシュ名の最後のNは数値です。インデックスを作成する場合に使用します。値には0以上の数字を指定してください。連続している必要はありません。
#### table:columns:type:
カラムの物理型を記述します。変換は行わず、そのまま出力します。
#### table:columns:size:
カラムの物理型において、数値や文字列型のサイズを記述します。括弧は不要です。
#### table:columns:check:
Check制約の条件式を記述します。配列で記述することも可能です。条件式内にカラム名を使用する場合は、<name>という文字列があれば、それを置換します。
#### table:Columns:nullable:
設定するとNullを許可します。デフォルトはNullを許可しません。
#### table:columns:default:
デフォルト値を記述します。
#### table:columns:comment:
カラムのコメントを記述します。


## Domain定義の記述
ドメイン定義は、カラム定義の属性をすべて記述することができます。


このドメインをカラム定義で使用することで、型定義の共通化を行うことができます。ドメイン名と同じカラム名の場合は、カラム定義にドメイン名自体の記述を省略することも可能です。


### domains:"domain name"
ドメイン名をそのままハッシュキーとして記述します。このハッシュの下にtypeなどのハッシュを記述することができます。


## dictionary定義の記述
論理名を物理名に変換するために使用します。

### dictionary:"論理名"
論理名をハッシュキーとして記述します。値として対応する物理名を記述します。
